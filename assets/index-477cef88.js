(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();const r=t=>document.getElementById(t),l=(t,o,s)=>t.addEventListener(o,s),g=(t,o,s)=>{const c=document.createElement("option");c.text=s,c.value=o,t.add(c)},b=t=>({deviceId:t,aspectRatio:16/9,width:1920,height:1080}),O=t=>({deviceId:t}),E=async()=>{const t=navigator.permissions.query({name:"microphone"}),o=navigator.permissions.query({name:"camera"}),s=await Promise.all([t,o]);s[0].state==="prompt"&&s[1].state==="prompt"&&(await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach(e=>e.stop())};document.addEventListener("DOMContentLoaded",()=>{const t=r("screen"),o=r("video"),s=r("video-select"),c=r("audio-select"),e=r("setting-popup"),n=r("close-setting-btn"),u=r("open-setting-btn"),v=r("menu"),i=r("volume-input"),y=r("fullscreen-btn");let p=!1,d=null;const h=async()=>{await E(),(await navigator.mediaDevices.enumerateDevices()).forEach(a=>{a.kind==="videoinput"?g(s,a.deviceId,a.label):a.kind==="audioinput"&&g(c,a.deviceId,a.label)})},f=async()=>{const m=s.value,a=c.value;if(d==null||d.getTracks().forEach(L=>L.stop()),!m&&!a){o.srcObject=null,v.classList.remove("opacity-0");return}d=await navigator.mediaDevices.getUserMedia({video:m?b(s.value):!1,audio:a?O(c.value):!1}),o.srcObject=d,o.volume=Number(i.value)/100,m&&v.classList.add("opacity-0")};i.value=localStorage.getItem("volume")||"100",i.style.setProperty("--volume",`${i.value}%`),h(),l(s,"change",()=>f()),l(c,"change",()=>f()),l(n,"click",()=>{e.classList.remove("open"),e.classList.add("close")}),l(u,"click",()=>{e.classList.remove("close"),e.classList.add("open")}),l(i,"input",()=>{i.style.setProperty("--volume",`${i.value}%`),o.volume=Number(i.value)/100}),l(i,"change",()=>{localStorage.setItem("volume",i.value)}),l(y,"click",()=>{p=!p,p?t.requestFullscreen():document.exitFullscreen()})});
